<?php

/**
 * @file calculates statistics
 */

function sentiment_stat_menu() {
      $items['admin/config/services/stat'] = array(
    'title' => 'Sentiment Stat Test',
    'description' => t('Test stat generation'),
    'page callback' => array('sentiment_stat_calculate'),
    'access arguments' => array('administer site configuration'),
  );
        return $items;
}

/**
 * 
 */

function sentiment_stat_calculate() {
    $field = "elated";
    $mean_init = 0;
    $sa = db_select("sentiment_analyzer", "sa")
    ->fields("sa", array($field))
    ->execute()
    ->fetchCol();
    foreach($sa as $number) {
        $mean_init = $mean_init + $number;
    }
    $mean = $mean_init / count($sa);
    watchdog("sa", "<pre>" . print_r($sa, true) . "</pre>");
    watchdog("mean", "<pre>" . print_r($mean, true) . "</pre>");
    $variance_init = 0;
    foreach($sa as $number) {
        $variance_init = $variance_init + pow(($number - $mean), 2);
    }
    $variance = $variance_init / count($sa);
    watchdog("variance", "<pre>" . print_r($variance, true) . "</pre>");
    $std = sqrt($variance);
    watchdog("std", "<pre>" . print_r($std, true) . "</pre>");
}