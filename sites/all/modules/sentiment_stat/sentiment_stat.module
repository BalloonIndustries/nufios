<?php

/**
 * @file calculates statistics
 */

function sentiment_stat_menu() {
      $items['admin/config/services/stat'] = array(
    'title' => 'Sentiment Stat Test',
    'description' => t('Test stat generation'),
    'page callback' => array('sentiment_stat_calculate'),
    'access arguments' => array('administer site configuration'),
  );
        return $items;
}

/**
 * 
 */

function sentiment_stat_calculate() {
    $field = "elated";
    $avg_init = 0;
    $sa = db_select("sentiment_analyzer", "sa")
    ->fields("sa", array($field))
    ->execute()
    ->fetchCol();
    foreach($sa as $number) {
        $avg_init = $avg_init + $number;
    }
    $avg = $avg_init / count($sa);
    watchdog("sa", "<pre>" . print_r($sa, true) . "</pre>");
    watchdog("avg", "<pre>" . print_r($avg, true) . "</pre>");
}